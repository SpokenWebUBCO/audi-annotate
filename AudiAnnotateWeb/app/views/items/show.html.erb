<p id="notice"><%= notice %></p>

<div class="container">
  The IIIF manifest for <%= @item.label %> is at <%= link_to @item.manifest_uri, @item.manifest_uri %>
</div>

<div class="container">
  Annotations
  <ul>
    <% @item.canvases.each do |canvas| %>
      <li>
        <%= canvas.position %>
        <% canvas.annotation_pages.each do |page| %>
          <%= page.label %>
          <ul>
            <% page.annotations.each do |annotation| %>
              <li><%= annotation.start_time %>: <%= annotation.text %></li>
            <% end %>
          </ul>
        <% end %>
      </li>
    <% end %> 
    
  </ul>
</div>

<div class="container">
  <h2>Add annotation file</h2>
  <%= form_with(model: @item, url: add_annotation_file_path, local: true) do |form| %>


    <div class="form-group row">
      <%= form.label :layer, class: "col-sm-2 col-form-label" %>
      <div class="col-sm-4">
        <%= form.text_field :layer, class: 'form-control' %>
      </div>
    </div>

    <div class="form-group row">
      <%= form.label :annotation_file, class: "col-sm-2 col-form-label" %>
      <div class="col-sm-4">
        <%= form.file_field :annotation_file, class: 'form-control' %>
      </div>
    </div>

    <%= form.hidden_field(:label) %>
    <%= form.hidden_field(:repo_name) %>
    <%= form.hidden_field(:user_name) %>

    <div class="actions">
      <%= form.submit('Add', class: "btn btn-light") %>
    </div>
  <% end %>
</div>


<%= link_to 'Back', project_path(@item.user_name, @item.repo_name) %>
